(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{17:function(e,t,a){e.exports=a(39)},22:function(e,t,a){},23:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),s=a(13),l=a.n(s),r=(a(22),a(14)),o=a(16),c=a(2),u=a(3),m=a(5),p=a(4),d=a(6),h=(a(23),function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"bar"},i.a.createElement("div",null,i.a.createElement("h1",{className:"bar__title"},"\u597d\u65b0\u805e\u9023\u64ad\u7db2"),i.a.createElement("h2",{className:"bar__subtitle"},"\u76f4\u64ad\u6642\u6bb5\u653e\u76f4\u64ad\uff0c\u6c92\u6709\u76f4\u64ad\u653e\u6700\u65b0\x1d\uff0c\u65b0\u805e\u4e4b\u9593\u64ad\u4e32\u5834\u5f71\u7247")),i.a.createElement("button",{className:"button bar__profile"}))}}]),t}(n.Component)),v=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).toggleFilterOption=function(e){if(console.log("toggle filter",e.target.value),"subtitlesOnly"!==e.target.value){var t=a.props.languages,n=t.indexOf(e.target.value);-1!==n?t.splice(n,1):t.push(e.target.value),a.props.setAppState({languages:t})}else a.props.setAppState({subtitlesOnly:!a.props.subtitlesOnly})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.filters,n=t.languages,s=t.subtitlesOnly,l={languages:"\u8a9e\u8a00",other:"\u7279\u6b8a\u9078\u9805"},r=[];return a.forEach(function(t,a){var o=[];t[Object.keys(t)[0]].forEach(function(t,l){var r=!1;0===a&&s?r=!0:1===a&&n.includes(t.value)&&(r=!0),o.push(i.a.createElement("button",{key:l,className:"button pill"+(r?" pill--selected":""),value:t.value,onClick:e.toggleFilterOption},t.key))}),r.push(i.a.createElement("div",{key:a,className:"filter"},i.a.createElement("h3",{className:"filter__category"},l[Object.keys(t)[0]]),i.a.createElement("div",{className:"pills pills--bordered"},o)))}),i.a.createElement("div",{className:"filters"},r)}}]),t}(n.Component);String.prototype.trunc=String.prototype.trunc||function(e){return this.length>e?this.substr(0,e-1)+"...":this};var g=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).componentDidUpdate=function(e,t,n){"undefined"!=typeof a.props.db&&"undefined"==typeof e.db&&(console.log("db loaded",a.props.db),a.fetchPrograms())},a.fetchPrograms=function(){console.log("gallery mounted"),a.props.db.collection("programs").get().then(function(e){var t=[];e.forEach(function(e){console.log(e.id," => ",e.data());var a=e.data(),n=[];a.hasOwnProperty("liveTimes")&&a.liveTimes.forEach(function(e){n.push({startTime:e.startTime,endTime:e.endTime,title:e.title,timezone:e.timezone})}),t.push({name:a.title,previewUrl:a.cover,languages:[a.language],hasSubtitles:a.hasSubtitles,description:"",liveTimes:n})}),a.props.setAppState({programs:t},function(){console.log("loaded programs")})})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e={"zh-tw":"\u83ef\u8a9e","min-tw":"\u53f0\u8a9e",sign:"\u624b\u8a9e","en-us":"English",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",id:"Indonesian",vi:"ti\u1ebfng Vi\u1ec7t"},t="null"!=typeof this.props.programs?this.props.programs:[],a=[];return t.forEach(function(t,n){var s=[];t.languages.forEach(function(t,a){s.push(i.a.createElement("button",{key:"lang"+a,className:"pill pill--small",value:t},e[t]))}),t.hasSubtitles&&s.push(i.a.createElement("button",{key:n,className:"pill pill--small",value:"subtitles"},"\u6709\u5b57\u5e55")),a.push(i.a.createElement("div",{key:n,className:"gallery__item"},i.a.createElement("img",{className:"gallery__item__preview",alt:t.name,src:t.previewUrl}),i.a.createElement("h3",{className:"gallery__item__title"},t.name),i.a.createElement("div",{className:"gallery__item__body"},t.liveTimes.map(function(e){return i.a.createElement("div",{key:"".concat(e.title,"-").concat(e.startTime)},"".concat(e.title,", ").concat(e.startTime,"~").concat(e.endTime))})),i.a.createElement("div",{className:"pills"},s)))}),i.a.createElement("div",{className:"gallery"},a)}}]),t}(n.Component),b=a(8),f=function(e){function t(){return Object(c.a)(this,t),Object(m.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,a=e.handleClick;return i.a.createElement("li",{value:t.videoId,className:"queue__item row",onClick:a},i.a.createElement("div",{className:"queue__item__thumbnail"},i.a.createElement("img",{alt:"\u5f71\u7247\u9810\u89bd\u5716\u7247",src:t.hasOwnProperty("image")&&""!==t.image?t.image:""})),i.a.createElement("div",{className:"texts column"},i.a.createElement("h5",null,t.title),i.a.createElement("p",null,t.channel),i.a.createElement("p",null,t.description)))}}]),t}(n.Component),y=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={customVidUrlIsValid:!1,url:"",preview:void 0,queue:[]},a.componentDidMount=function(){window.fbAsyncInit=function(){window.FB.init({appId:"585832711939369",cookie:!0,xfbml:!0,version:"v2.1"})}.bind(Object(b.a)(a)),function(e,t,a){var n,i=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="//connect.facebook.net/en_US/sdk.js",i.parentNode.insertBefore(n,i))}(document,"script","facebook-jssdk")},a.enqueue=function(){var e=a.state.queue.concat(a.state.preview);a.setState({queue:e},function(e){console.log("queue",a.state.queue),a.setState({preview:void 0,url:""})})},a.customVideoUrlUpdated=function(e){console.log("valid url: ".concat(a.validURL(e.target.value)));var t=e.target.value;a.validURL(t)?a.setState({customVidUrlIsValid:!0,url:t}):a.setState({customVidUrlIsValid:!1})},a.segueTimeLimitUpdated=function(e){var t=parseInt(e.target.value);console.log("selected",t),a.props.setAppState({segueTimeLimit:t})},a.fetchVideoDetails=function(){window.FB.api("/",{id:a.state.url,access_token:"585832711939369|NB3IYtyjITLZ_q5TR61QYUzzzRA"},function(e){e&&!e.error&&(console.log("response",e),"undefined"===typeof e.title?window.FB.api("/","post",{id:this.state.url,access_token:"585832711939369|NB3IYtyjITLZ_q5TR61QYUzzzRA"},function(e){e&&!e.error&&(console.log(e),this.setState({preview:{title:e.title,image:e.image[0].url,description:e.description,channel:e.site_name,videoId:this.state.url.replace("https://www.youtube.com/watch?v=","").substr(0,11)}}),this.enqueue())}.bind(this)):this.setState({preview:{title:e.title,image:e.image[0].url,description:e.description.substr(0,60),channel:e.site_name,videoId:this.state.url.replace("https://www.youtube.com/watch?v=","").substr(0,11)}}))}.bind(Object(b.a)(a)))},a.handleItemClick=function(e){console.log(e.target)},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"validURL",value:function(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}},{key:"render",value:function(){var e=this,t=[];return this.state.queue.forEach(function(a){t.push(i.a.createElement(f,{key:a.videoId,item:a,handleClick:e.handleItemClick}))}),i.a.createElement("div",null,i.a.createElement("div",{className:"column custom-vid"},i.a.createElement("div",{className:"controls"},i.a.createElement("div",{className:"textbox-container"},i.a.createElement("input",{onChange:this.customVideoUrlUpdated,className:"textbox textbox--borderless textbox--url",placeholder:"\u4e32\u5834\u5f71\u7247\u4e4b YouTube \u9023\u7d50..."}),i.a.createElement("button",{id:"search-vid",disabled:!this.state.customVidUrlIsValid,onClick:this.fetchVideoDetails},"\u52a0\u5165")),i.a.createElement("div",{className:"row picker-container"},i.a.createElement("label",null,"\u6bcf\u6bb5\u4e32\u5834\u6642\u9593\uff1a"),i.a.createElement("select",{className:"",onChange:this.segueTimeLimitUpdated},i.a.createElement("option",{value:"-1"},"\u4e0d\u9650"),i.a.createElement("option",{value:"10"},"10\u5206"),i.a.createElement("option",{value:"30"},"30\u5206")))),i.a.createElement("ul",{className:"queue"},t)))}}]),t}(n.Component),E="AIzaSyBKEeohxlGn9LRyKDA2V1lju9xKB66sSEw",w=a(24);a(37);var O=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return(a=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(i)))).state={languages:["zh-tw","min-tw","sign","en-us","vi","id","th"],subtitlesOnly:!1,segueTimeLimit:-1,db:void 0,programs:[]},a.setAppState=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var i=n[t],s=Object(o.a)(i,2),l=s[0],c=s[1];a.setState(Object(r.a)({},l,c))}},a.componentDidMount=function(){var e={apiKey:E,authDomain:"better-news-235900.firebaseapp.com",databaseURL:"https://better-news-235900.firebaseio.com",projectId:"better-news-235900",storageBucket:"better-news-235900.appspot.com"};w.initializeApp(e);var t=w.firestore();a.setState({db:t},function(){console.log(this.state.db)})},a}return Object(d.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"App"},i.a.createElement(h,null),i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"side"},i.a.createElement("h3",{className:"side__title"},"\u4e32\u5834\u5f71\u7247\u6e05\u55ae"),i.a.createElement(y,{setAppState:this.setAppState})),i.a.createElement("div",{className:"main"},i.a.createElement(v,{setAppState:this.setAppState,languages:this.state.languages,subtitlesOnly:this.state.subtitlesOnly,filters:[{other:[{key:"\u4ee5\u6709\u5b57\u5e55\u7bc0\u76ee\u70ba\u4e3b",value:"subtitlesOnly"}]},{languages:[{key:"\u83ef\u8a9e",value:"zh-tw"},{key:"\u53f0\u8a9e",value:"min-tw"},{key:"\u624b\u8a9e",value:"sign"},{key:"English",value:"en-us"},{key:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",value:"th"},{key:"Indonesian",value:"id"},{key:"ti\u1ebfng Vi\u1ec7t",value:"vi"}]}],setFilters:this.setFilters}),i.a.createElement(g,{db:this.state.db,setAppState:this.setAppState,programs:this.state.programs.filter(function(t){return(!e.state.subtitlesOnly||t.hasSubtitles)&&t.languages.some(function(t){return e.state.languages.includes(t)})})}))))}}]),t}(n.Component);a(38),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(i.a.createElement(O,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[17,1,2]]]);
//# sourceMappingURL=main.5f9c2f95.chunk.js.map